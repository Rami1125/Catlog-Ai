<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>דשבורד מחסנים - דוח ותחזית</title>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5faff;
      margin: 0;
      padding: 20px;
      color: #003366;
    }
    h1, h2 {
      text-align: center;
      color: #004a99;
    }
    .warehouse {
      background: #ffffff;
      border: 1px solid #d0e6ff;
      border-radius: 16px;
      padding: 20px;
      margin: 30px 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    table th, table td {
      border: 1px solid #d0e6ff;
      padding: 10px;
      text-align: center;
    }
    table th {
      background: #e6f0ff;
    }
    .chart {
      height: 300px;
    }
    .summary {
      background: #fff8cc;
      padding: 15px;
      margin-top: 20px;
      border-radius: 10px;
      font-weight: bold;
      color: #333;
    }
  </style>
  <script>
    google.charts.load("current", {packages:["corechart", "line"]});
    google.charts.setOnLoadCallback(drawAllCharts);

    function drawAllCharts() {
      drawWarehouse("chart30", "מחסן 30 (שארק)", 102, 132, 113);
      drawWarehouse("chart32", "מחסן 32 (כראדי)", 11, 11, 10);
      drawWarehouse("chart40", "מחסן 40 (שי שרון)", 18, 0, 0);
    }

    function drawWarehouse(containerId, title, placements, swaps, removals) {
      let data = google.visualization.arrayToDataTable([
        ['פעולה', 'כמות'],
        ['הצבות', placements],
        ['החלפות', swaps],
        ['הוצאות', removals]
      ]);

      let options = {
        title: title + " - חלוקת פעולות",
        colors: ['#3399ff','#66ccff','#003366'],
        legend: { position: 'bottom' }
      };

      new google.visualization.PieChart(document.getElementById(containerId)).draw(data, options);

      // תחזית קדימה עד דצמבר
      let forecastData = [["חודש", "צפי פעולות"]];
      let total = placements + swaps + removals;
      let trend = total > 50 ? 5 : 1; // מחסנים גדולים מקבלים קצב גידול מהיר יותר
      let value = total;
      for (let m = new Date().getMonth() + 1; m <= 12; m++) {
        forecastData.push([`חודש ${m}`, value]);
        value += trend;
      }

      let dataForecast = google.visualization.arrayToDataTable(forecastData);
      let optionsForecast = {
        title: title + " - תחזית עד דצמבר",
        colors: ["#0066cc"],
        curveType: "function",
        legend: "none",
        hAxis: { title: "חודשים" },
        vAxis: { title: "סה״כ פעולות" }
      };
      new google.visualization.LineChart(document.getElementById(containerId + "_forecast")).draw(dataForecast, optionsForecast);
    }
  </script>
</head>
<body>
  <h1>דשבורד פעילות מחסנים</h1>

  <!-- מחסן 30 -->
  <div class="warehouse">
    <h2>מחסן 30 - שארק</h2>
    <table>
      <tr><th>פעולה</th><th>כמות</th></tr>
      <tr><td>הצבות</td><td>102</td></tr>
      <tr><td>החלפות</td><td>132</td></tr>
      <tr><td>הוצאות</td><td>113</td></tr>
      <tr><th>סה״כ</th><th>347</th></tr>
    </table>
    <div id="chart30" class="chart"></div>
    <div id="chart30_forecast" class="chart"></div>
    <div class="summary">שארק פעיל מאוד באזור המרכז והשרון. נדרש לאזן בין הצבות להחלפות כדי לשמור על זמינות צי.</div>
  </div>

  <!-- מחסן 32 -->
  <div class="warehouse">
    <h2>מחסן 32 - כראדי</h2>
    <table>
      <tr><th>פעולה</th><th>כמות</th></tr>
      <tr><td>הצבות</td><td>11</td></tr>
      <tr><td>החלפות</td><td>11</td></tr>
      <tr><td>הוצאות</td><td>10</td></tr>
      <tr><th>סה״כ</th><th>32</th></tr>
    </table>
    <div id="chart32" class="chart"></div>
    <div id="chart32_forecast" class="chart"></div>
    <div class="summary">כראדי מבצע פעילות מצומצמת יותר. יש פוטנציאל להגדלת היקף הפעילות בעיקר בהצבות חדשות.</div>
  </div>

  <!-- מחסן 40 -->
  <div class="warehouse">
    <h2>מחסן 40 - שי שרון</h2>
    <table>
      <tr><th>פעולה</th><th>כמות</th></tr>
      <tr><td>הצבות</td><td>18</td></tr>
      <tr><td>החלפות</td><td>0</td></tr>
      <tr><td>הוצאות</td><td>0</td></tr>
      <tr><th>סה״כ</th><th>18</th></tr>
    </table>
    <div id="chart40" class="chart"></div>
    <div id="chart40_forecast" class="chart"></div>
    <div class="summary">שי שרון מתמקד באזור השרון בלבד. מומלץ להוסיף שירותי החלפה והוצאה כדי להגדיל יעילות.</div>
  </div>
</body>
</html>
